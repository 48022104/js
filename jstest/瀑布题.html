<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>

	<style>
		* {
			padding: 0;
			margin: 0;
			background: #f2f2f2;
		}



		#all {
			margin: auto;
			position: relative;
			transition: 0.5s;
		}

		.pic {
			width: 200px;
			box-sizing: border-box;
			background: #fff;
			padding: 10px;
			position: absolute;
			transition: 0.5s;
			left: 0px;
			top: 0px;
			cursor: pointer;
			

		}

		.pic img {
			width: 180px;
			display: block;
			transition: 0.5s;
			
		}
	</style>
	<body>
		<div id="all">
			<!-- <div class='pic'><img src='images/1.jpg'/></div> -->
		</div>
	</body>

	<script>
		var a = document.getElementById("all");
		var aw = document.documentElement.clientWidth;
		var m = parseInt(aw / 210);
		var n = 20;
		var arr = [];
		var min;
		var min_index;
		a.style.width = m * 210 + "px";

		for (var i = 0; i < n; i++) {
			a.innerHTML += "<div class='pic' style='left:0px;top:0px';><img  style= 'width:180px' src='images/" + (i + 1) + ".jpg'/></div>"
		}

		var p = document.getElementsByClassName('pic');

		function gogogo() {
			aw = document.documentElement.clientWidth;
			m = parseInt(aw / 210);
			a.style.width = m * 210 + "px";
			for (var j = 0; j < m; j++) {
				arr[j] = p[j].clientHeight;
			} //前m个排列整齐

			function cra() {
				min = arr[0];
				min_index = 0;
				for (var j = 0; j < m; j++) {
					if (arr[j] < min) {
						min = arr[j];
						min_index = j;
					}
				}
				min = min + 10;
			}
			cra();
			for (var i = 0; i < n; i++) {
				p[i].style.left = (i % m) * 210 + 'px'; //设定left
				p[i].style.top = 0 + 'px'; //设定top
				if ((i + 1) > m) {
					p[i].style.top = min + 'px';
					p[i].style.left = min_index * 210 + 'px';
					arr[min_index] = min + p[i].clientHeight;
					cra();
				}
			}
		}



		window.onload = function() {
			gogogo()
		}

		window.onresize = function() {
			gogogo()

		}
		
		
		
		
		
	</script>

</html>
